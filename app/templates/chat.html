{% extends "base.html" %}
{% block title %}Chat - OpenRAG{% endblock %}

{% block content %}
<div class="flex flex-col h-[calc(100vh-12rem)]">

  <h1 class="text-2xl font-semibold text-gray-800 mb-4">Chat with Documents</h1>

  <!-- Messages area -->
  <div id="messages" class="flex-1 overflow-y-auto space-y-4 bg-white rounded-lg border border-gray-200 p-4 mb-4">
    <div class="text-center text-gray-400 text-sm py-8">
      Ask a question about your uploaded documents.
    </div>
  </div>

  <!-- Input form -->
  <form
    hx-post="/chat"
    hx-target="#messages"
    hx-swap="beforeend"
    hx-on::after-request="this.reset(); document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight;"
    class="flex gap-3"
  >
    <input
      type="text"
      name="message"
      placeholder="Ask a question..."
      required
      autocomplete="off"
      class="flex-1 border border-gray-300 rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
    >
    <button
      type="submit"
      class="px-6 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 flex items-center gap-2"
    >
      Send
      <span class="htmx-indicator spinner">&#9696;</span>
    </button>
  </form>

</div>
{% endblock %}
